# Collaboration & Debug Tips (Codex <-> Matt)
Purpose: Running log of what worked, what broke, and why.

[2025-08-13 17:00] Topic: Logging DI refactor
Context: Introduced constructor injection for logging services and confirmation helpers.
Observations: Simplifies testing and removes static logger state.
Codex Limitations noticed: Unable to execute Windows-specific tests in container.
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Use DI to share single logging service and helpers.
Action Items: Monitor CI for Windows-specific behaviors.
Related Commits/PRs: (this PR)

[2025-08-15 00:00] Topic: MQTT service refactor
Context: Simplified MQTT client by unifying constructors and publish APIs.
Observations: Connect now disconnects before reconnecting and raises connection state events.
Codex Limitations noticed: dotnet SDK unavailable locally.
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Reduce surface area and ensure consistent token resolution across publishes.
Action Items: Install .NET SDK to run tests locally.
Related Commits/PRs: (this PR)

[2025-08-13 20:41] Topic: WPF workload in CI
Context: GitHub Actions failed because the `windowsdesktop` workload is no longer recognized.
Observations: Replacing it with the `wpf` workload restores pipeline compatibility.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: verifying commands against GitHub runners.
Decisions & Rationale: Use the `wpf` workload across build, test, quality, and packaging jobs.
Action Items: Monitor CI for workload availability changes.
Related Commits/PRs: (this PR)

[2025-08-13 17:40] Topic: Navigation bar logo
Context: Replaced placeholder text with application logo in main window.
Observations: Logo displays brand and cleans up header.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Use embedded image resource for branding.
Action Items: none
Related Commits/PRs: (this PR)

[2025-08-13 17:52] Topic: Logo resource path fix
Context: Navigation bar logo failed to render because image path was relative to the view folder.
Observations: Using a root-relative path loads the embedded image correctly.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: Providing exact asset location.
Decisions & Rationale: Use root-relative resource paths for WPF assets.
Action Items: Ensure future asset references include leading slash.
Related Commits/PRs: (this PR)

[2025-08-13 18:09] Topic: CI runs on feature branches
Context: Enabled GitHub Actions to execute tests on pushes to `feature/**` and `bugfix/**` branches.
Observations: Codex can push code to trigger remote tests without local execution.
Codex Limitations noticed: `dotnet test` cannot run `net8.0-windows` tests on Linux.
Effective Prompts / Instructions that worked: Configuring push patterns and `workflow_dispatch`.
Decisions & Rationale: Use GitHub-hosted runners to centralize validation.
Action Items: Monitor CI runs for unexpected failures.
Related Commits/PRs: (this PR)

[2025-08-13 18:28] Topic: CI workflow consolidation
Context: Unified multiple GitHub workflows into a single pipeline and added AGENTS instructions to review changelog and collaboration tips.
Observations: Centralized CI reduces maintenance overhead.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Single pipeline with build, test, quality, and packaging jobs.
Action Items: Monitor self-heal integration with new pipeline.
Related Commits/PRs: (this PR)

[2025-08-13 18:50] Topic: On-demand CI via /test comment
Context: Enabled `/test` comment workflow and documented CI-only testing policy.
Observations: CI can run without local test execution.
Codex Limitations noticed: Tests cannot run on Linux container; rely on GitHub Actions.
Effective Prompts / Instructions that worked: Using comment trigger pattern from user guidance.
Decisions & Rationale: Centralize validation in CI and enforce via docs and PR template.
Action Items: Ensure branch protection requires CI.
Related Commits/PRs: (this PR)

[2025-08-13 19:01] Topic: Async command refactor
Context: Introduced AsyncRelayCommand and async script evaluation to prevent UI blocking.
Observations: Async command simplifies long-running actions and avoids deadlocks.
Codex Limitations noticed: PowerShell unavailable; tip appended manually.
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Use AsyncRelayCommand for operations needing await without blocking.
Action Items: Monitor for unhandled exceptions in async commands.
Related Commits/PRs: (this PR)

[2025-08-13 19:42] Topic: Remove unused classes
Context: Cleaned up obsolete logging and template control types.
Observations: Deleting `RichTextLogger` and installer `CustomControl1` simplified the codebase with no build impact.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Prefer removing stale classes to reduce maintenance and confusion.
Action Items: Monitor builds for any lingering references.
Related Commits/PRs: (this PR)

[2025-08-16 18:00] Topic: MQTT enhancements
Context: Consolidated MQTT updates: options-based configuration, tokenized endpoint/message publishing, endpoint UI with tooltips, and message routing service.
Observations: Shared options instance simplifies updates and cleanly disconnects before reconnecting. Tests require WindowsDesktop runtime.
Codex Limitations noticed: net8.0-windows tests cannot execute in Linux container.
Effective Prompts / Instructions that worked: Following AGENTS.md to attempt tests and update docs.
Decisions & Rationale: Centralize configuration via IOptions and route messages through a dedicated service.
Action Items: Run full test suite on Windows runner.
Related Commits/PRs: (this PR)

[2025-08-16 20:00] Topic: Configuration save guard
Context: Prevented stack overflow when saving empty CSV configuration and ensured main window sizes to content.
Observations: Cloning configuration before serialization avoids recursion; sizing to content keeps controls visible.
Codex Limitations noticed: Unable to run WindowsDesktop tests locally; rely on CI.
Effective Prompts / Instructions that worked: Using `ReferenceHandler.IgnoreCycles` and snapshotting configuration data.
Decisions & Rationale: Detach event references and ignore cycles to ensure safe persistence.
Action Items: Run tests on CI.
Related Commits/PRs: (this PR)

# Collaboration & Debug Tips (Codex <-> Matt)
Purpose: Running log of what worked, what broke, and why.

[2025-08-13 17:00] Topic: Logging DI refactor
Context: Introduced constructor injection for logging services and confirmation helpers.
Observations: Simplifies testing and removes static logger state.
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Use DI to share single logging service and helpers.
Action Items: Monitor CI for Windows-specific behaviors.
Related Commits/PRs: (this PR)

[2025-08-15 00:00] Topic: MQTT service refactor
Context: Simplified MQTT client by unifying constructors and publish APIs.
Observations: Connect now disconnects before reconnecting and raises connection state events.
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Reduce surface area and ensure consistent token resolution across publishes.
Action Items: Monitor CI for MQTT regressions.
Related Commits/PRs: (this PR)

[2025-08-13 20:41] Topic: WPF workload in CI
Context: GitHub Actions failed because the `windowsdesktop` workload is no longer recognized.
Observations: Replacing it with the `wpf` workload restores pipeline compatibility.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: verifying commands against GitHub runners.
Decisions & Rationale: Use the `wpf` workload across build, test, quality, and packaging jobs.
Action Items: Monitor CI for workload availability changes.
Related Commits/PRs: (this PR)

[2025-08-13 17:40] Topic: Navigation bar logo
Context: Replaced placeholder text with application logo in main window.
Observations: Logo displays brand and cleans up header.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Use embedded image resource for branding.
Action Items: none
Related Commits/PRs: (this PR)

[2025-08-13 17:52] Topic: Logo resource path fix
Context: Navigation bar logo failed to render because image path was relative to the view folder.
Observations: Using a root-relative path loads the embedded image correctly.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: Providing exact asset location.
Decisions & Rationale: Use root-relative resource paths for WPF assets.
Action Items: Ensure future asset references include leading slash.
Related Commits/PRs: (this PR)


[2025-08-13 18:30] Topic: CI workflow and remote testing
Context: Centralized CI pipeline runs on `feature/**` and `bugfix/**` branches with optional `/test` comment triggers.
Observations: Single workflow handles build, test, quality, and packaging; remote runs compensate for missing WindowsDesktop support locally.
Codex Limitations noticed: `dotnet test` for `net8.0-windows` projects fails on Linux.
Effective Prompts / Instructions that worked: Configuring branch patterns and comment triggers.
Decisions & Rationale: Rely on GitHub-hosted runners for validation and keep AGENTS instructions to review docs.
Action Items: Monitor CI for workload changes and enforce branch protection requiring CI success.
Related Commits/PRs: (this PR)

[2025-08-13 19:01] Topic: Async command refactor
Context: Introduced AsyncRelayCommand and async script evaluation to prevent UI blocking.
Observations: Async command simplifies long-running actions and avoids deadlocks.
Codex Limitations noticed: PowerShell unavailable; tip appended manually.
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Use AsyncRelayCommand for operations needing await without blocking.
Action Items: Monitor for unhandled exceptions in async commands.
Related Commits/PRs: (this PR)

[2025-08-13 19:42] Topic: Remove unused classes
Context: Cleaned up obsolete logging and template control types.
Observations: Deleting `RichTextLogger` and installer `CustomControl1` simplified the codebase with no build impact.
Codex Limitations noticed: none
Effective Prompts / Instructions that worked: n/a
Decisions & Rationale: Prefer removing stale classes to reduce maintenance and confusion.
Action Items: Monitor builds for any lingering references.
Related Commits/PRs: (this PR)

[2025-08-16 18:00] Topic: MQTT enhancements
Context: Consolidated MQTT updates: options-based configuration, tokenized endpoint/message publishing, endpoint UI with tooltips, and message routing service.
Observations: Shared options instance simplifies updates and cleanly disconnects before reconnecting. Tests require WindowsDesktop runtime.
Effective Prompts / Instructions that worked: Following AGENTS.md to attempt tests and update docs.
Decisions & Rationale: Centralize configuration via IOptions and route messages through a dedicated service.
Action Items: Validate MQTT behavior via CI test runs.
Related Commits/PRs: (this PR)

[2025-08-16 20:00] Topic: Configuration save guard
Context: Prevented stack overflow when saving empty CSV configuration and ensured main window sizes to content.
Observations: Cloning configuration before serialization avoids recursion; sizing to content keeps controls visible.
Effective Prompts / Instructions that worked: Using `ReferenceHandler.IgnoreCycles` and snapshotting configuration data.
Decisions & Rationale: Detach event references and ignore cycles to ensure safe persistence.
Action Items: Rely on CI to validate serialization and UI sizing.
Related Commits/PRs: (this PR)

[2025-08-17 00:00] Topic: Dependency checks and instruction review
Context: Build failed because `FluentAssertions` was used without a package reference and AGENTS.md wasn't consulted.
Observations: Missing dependencies cause compile errors; instructions files provide required setup details.
Codex Limitations noticed: `net8.0-windows` tests cannot execute on Linux; rely on CI after package restores.
Effective Prompts / Instructions that worked: Reviewing AGENTS and project files before committing.
Decisions & Rationale: Verify `.csproj` files for needed packages and read AGENTS instructions before coding.
Action Items: Add package references when introducing new libraries and document dependency checks in changelog.
Related Commits/PRs: (this PR)

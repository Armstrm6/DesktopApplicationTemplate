# Collaboration & Debug Tips (Codex <-> Matt)
Purpose: Running log of what worked, what broke, and why.

## How to Log
- Keep a single block per topic or feature.
- To expand an existing topic, update its block instead of creating a new one.
- Append commit hashes or PR numbers to the **Related Commits/PRs** line as work continues.
- Use `tools/add-tip.ps1` with the same `-Topic` value to generate a block, then merge it into the existing entry.
- Always record environment limitations (e.g., missing dotnet runtime).

[2025-08-27 04:05] Topic: Documentation restructuring
Context: Grouped changelog entries under feature headings and clarified topic-based logging.
Observations: CHANGELOG now organizes items by feature; collaboration tips emphasize one block per topic.
Codex Limitations noticed: PowerShell unavailable; appended tips manually.
Effective Prompts / Instructions that worked: User request to clarify docs and logging.
Decisions & Rationale: Improve readability and future contributions.
Action Items: none
Related Commits/PRs: c04f33a, 7a0c542

[2025-08-27 04:00] Topic: Service rule and screen abstractions
Context: Introduced IServiceRule/IServiceScreen services and refactored CSV and FTP create view models to use them.
Observations: Validation and screen events are centralized, reducing duplication across service workflows.
Codex Limitations noticed: Linux container lacks WindowsDesktop runtime; dotnet test cannot run.
Effective Prompts / Instructions that worked: Followed AGENTS guidelines for DI and tests.
Decisions & Rationale: Promote reuse and consistent screen behavior.
Action Items: Monitor CI for Windows-specific issues.
Related Commits/PRs: 7a3f881, 1effa28

[2025-08-27 03:58] Topic: File search service
Context: Added cached async file search integrated with File Observer to load image names through DI.
Observations: Service caches `Directory.EnumerateFiles` results to speed lookups; view model loads names via DI.
Codex Limitations noticed: dotnet test fails to build on Linux due to WPF dependencies.
Effective Prompts / Instructions that worked: User request to centralize file enumeration.
Decisions & Rationale: Provide reusable async search to support File Observer features.
Action Items: Validate on Windows CI.
Related Commits/PRs: 23548cf

[2025-08-27 02:57] Topic: Test reliability and service persistence
Context: Stabilized failing tests by ensuring options reload, awaiting file writes, and isolating static settings.
Observations: Added directory creation before saving, restored TCP options, registered pack URI, and ran settings sequentially.
Codex Limitations noticed: dotnet CLI unavailable; tests rely on CI.
Effective Prompts / Instructions that worked: AGENTS guidance on async/await and DI-safe constructors.
Decisions & Rationale: Ensure deterministic tests and reliable service persistence.
Action Items: Monitor CI for Windows-specific failures.
Related Commits/PRs: c80804f, 1cb79cf, b5dc2f1, 4c139ec, 6db84db

[2025-08-26 18:51] Topic: MQTT service enhancements
Context: Consolidated subscription view, added connection editor, will options, per-topic QoS, and advanced settings.
Observations: View models expose a single subscriptions collection, support per-topic QoS, and visualize subscribe results.
Codex Limitations noticed: Linux environment cannot render WPF; dotnet test unavailable.
Effective Prompts / Instructions that worked: Follow AGENTS for MVVM and DI.
Decisions & Rationale: Simplify MQTT workflow and ensure options propagate to client.
Action Items: Verify UI behavior on Windows CI.
Related Commits/PRs: 07beb7c, 90841c1, 40c79dc

[2025-08-26 12:00] Topic: Service creation navigation
Context: Embedded service creation flows in the main window and added navigation helpers with tests.
Observations: Double-clicking entries opens edit views; main window hosts service creation, removing separate window.
Codex Limitations noticed: dotnet CLI missing; rely on CI.
Effective Prompts / Instructions that worked: User request to streamline navigation.
Decisions & Rationale: Keep workflows within main window and validate navigation via tests.
Action Items: Confirm via CI.
Related Commits/PRs: 63d70dd, 40c79dc, 75c5e87

[2025-08-26 11:00] Topic: FTP service fixes
Context: Resolved service selection freeze, added cancel support, and fixed edit view constructor.
Observations: FTP create/edit views preload options, close correctly, and constructor guards against null view model.
Codex Limitations noticed: Linux environment lacks WindowsDesktop runtime; tests rely on CI.
Effective Prompts / Instructions that worked: Review build errors and follow DI guidelines.
Decisions & Rationale: Improve FTP UX and ensure DI-friendly constructors.
Action Items: Monitor CI for regressions.
Related Commits/PRs: b6b4e9d, 5787356, ca07bb8

[2025-08-27 05:30] Topic: Logging refactor
Context: Began removing legacy `ILoggingService` in favor of built-in logging providers.
Observations: Initial DI cleanup and configuration in `Program.cs` complete; remaining view models still reference old interface.
Codex Limitations noticed: Extensive references make full migration time-consuming.
Effective Prompts / Instructions that worked: Use `AddConsole()` and `AddDebug()` for provider setup.
Decisions & Rationale: Start with infrastructure pieces before addressing individual view models.
Action Items: Migrate remaining classes to `ILogger<T>` and update tests.
Related Commits/PRs:
[2025-08-27 04:25] Topic: Logging interface restoration
Context: Introduced core logging abstractions and refactored edit view models to support DI.
Observations: Added ILoggingService, LogLevel enum, moved LogEntry to core, and implemented Load methods on TCP and SCP edit view models.
Codex Limitations noticed: PowerShell unavailable; appended tip manually.
Effective Prompts / Instructions that worked: User request to fix logging build errors and target .NET 8.0.404.
Decisions & Rationale: Centralize logging for reuse and simplify DI by removing constructor parameters.
Action Items: none
Related Commits/PRs:
[2025-08-27 04:34] Topic: Logging service DI
Context: Save confirmation dialog failed because ILoggingService was not registered.
Observations: Added LoggingService to DI, added tests verifying SaveConfirmationHelper resolves only when logger is registered.
Codex Limitations noticed: pwsh unavailable for add-tip script.
Effective Prompts / Instructions that worked: Use DI registration guidelines and error message from runtime.
Decisions & Rationale: Register logging service to satisfy helper dependency and avoid runtime exceptions.
Action Items: Run tests.
Related Commits/PRs:

[2025-08-27 06:00] Topic: Main window bounds and service metrics
Context: Limited main window height to the work area and displayed average execution time in the service list.
Observations: Window no longer overlaps the taskbar; services show performance metrics beside their names.
Codex Limitations noticed: Linux container lacks WPF runtime so tests rely on CI.
Effective Prompts / Instructions that worked: User request to cap window size and reveal execution averages.
Decisions & Rationale: Preserve screen real estate and provide quick insight into service performance.
Action Items: Validate on Windows CI.
Related Commits/PRs:
